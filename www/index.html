<!DOCTYPE html>
<html lang="pl">
    <meta charset="utf-8">

    <body>
        <br>
        <h1 style="text-align: center; color: #324B4E">Stanowisko
            analizy ruchu
            telekomunikacyjnego w środowisku urządzeń IoT</h1>
        <h3 style="text-align: right; margin-right: 5%;">
            Zuzanna Cymerman 176012 <br>
            Marcin Jankowski 176120 <br>
            Mateusz Mikielewicz 176055 <br>
        </h3>
        <br>
        <div style="background-color:#D2E6E8; margin-left:
            5%;margin-right: 5%;">
            <h2 style="text-align: left; padding: 2%; ">Temperatura (Arduino
                UNO)</h2>
            <h1 id="temperature" style="text-align: center; color:#862300">null</h1>
            <br>
        </div>
        <br>
        <div style="background-color:#D2E6E8; margin-left:
            5%;margin-right: 5%;">
            <h2 style="text-align: left; padding: 2%;">Wilgotność (DE0 Nano)</h2>
            <h1 id="humidity" style="text-align: center;color:#862300">null</h1>
            <br>
        </div>
        <br>
        <div style="background-color:#D2E6E8; margin-left:
            5%;margin-right: 5%;">
            <h2 style="text-align: left; padding: 2%;">Kolor (Raspberry 3B+)</h2>
            <h1 id="color" style="text-align: center; color:#862300">null</h1>
            <br>
        </div>
        <script>
            function changeSensorText(text) {
                const sensor_type = text.split('_')[0];
                const data = text.split('_')[1];
                document.getElementById(sensor_type).innerHTML = data;
            }

            function runFunction(){
                httpGetAsync("http://localhost:8081",changeSensorText);
            }
            
            function httpGetAsync(theUrl, callback)
            {
                var xmlHttp = new XMLHttpRequest();
                xmlHttp.onreadystatechange = function() { 
                    if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
                        callback(xmlHttp.responseText);
                }
                xmlHttp.open("GET", theUrl, true); // true for asynchronous 
                xmlHttp.send(null);    
            }
            httpGetAsync("http://localhost:8081",changeSensorText);
            var t=setInterval(runFunction,2000);
        </script>
    </body>
</html>